{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Preserve internal whitespace for admin password validation (joana / joana 123)",
  "requirements": [
    {
      "id": "REQ-33",
      "summary": "Ensure the admin login flow accepts username \"joana\" with password \"joana 123\" (single internal space) and correctly sets the validated admin session state.",
      "acceptanceCriteria": [
        "Calling frontend `verifyLogin('joana', 'joana 123')` returns `true`.",
        "Logging in via the Admin Login form using username \"joana\" and password \"joana 123\" succeeds and sets the validated admin session state.",
        "The backend method `verifyAdminLogin('joana', 'joana 123')` returns `true`."
      ],
      "file_operations": [
        {
          "path": "frontend/src/pages/AdminLoginPage.tsx",
          "operation": "modify",
          "description": "Adjust admin form submission handling (and any local normalization) to preserve internal whitespace in the password while still trimming leading/trailing whitespace before calling `useAdminPasswordGate.verifyLogin`."
        },
        {
          "path": "frontend/src/components/admin/AdminPasswordDialog.tsx",
          "operation": "modify",
          "description": "Ensure the admin credential dialog preserves internal whitespace in the password while still trimming only leading/trailing whitespace before calling `useAdminPasswordGate.verifyLogin`."
        },
        {
          "path": "frontend/src/hooks/useAdminPasswordGate.ts",
          "operation": "modify",
          "description": "Confirm end-to-end `verifyLogin` passes the password through without collapsing/removing internal whitespace, and that successful verification persists validated state in session storage."
        }
      ]
    },
    {
      "id": "REQ-34",
      "summary": "Update `useAdminPasswordGate` credential normalization to only trim leading/trailing whitespace and never remove/collapse internal whitespace in the password.",
      "acceptanceCriteria": [
        "`useAdminPasswordGate.verifyLogin` must not apply any normalization that removes internal spaces (e.g., no regex that strips `\\s` globally).",
        "`verifyLogin('joana', 'joana 123')` succeeds, while `verifyLogin('joana', 'joana123')` does not succeed (space is significant).",
        "`verifyLogin(' joana ', ' joana 123 ')` succeeds (leading/trailing whitespace is still trimmed)."
      ],
      "file_operations": [
        {
          "path": "frontend/src/hooks/useAdminPasswordGate.ts",
          "operation": "modify",
          "description": "Implement/keep a strict normalization approach that uses only `trim()` for username/password (no global whitespace replacement) before calling `actor.verifyAdminLogin`, explicitly preserving internal spaces in the password."
        }
      ]
    }
  ]
}