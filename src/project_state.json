{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 23,
  "summary": "High-end beauty salon management app in Portuguese with an elegant luxury dark-mode gold/black aesthetic, featuring a conversion-focused home screen (carousel + category grid + WhatsApp CTA) and simplified internal management: appointment agenda, inventory (admin-only card UI), service catalog with pricing, client loyalty/preferences, portfolio photo uploads, client status updates, and a basic expenses dashboard (entradas vs. saídas).",
  "architectural_notes": [
    "UI/UX must be elegant and sophisticated using a gold, black, and white color palette.",
    "App language/localization: Portuguese.",
    "Mobile-first UI: optimized for thumb reach and tap targets.",
    "Luxury dark mode palette: background #000000 or #121212 with metallic gold (#D4AF37) / rose gold accents; WhatsApp CTA uses vibrant green.",
    "Typography direction: modern clean fonts (e.g., Montserrat or Poppins); bold headings.",
    "Home feed/portfolio imagery should be displayed as high-res cards with rounded corners (radius 16).",
    "Navigation: bottom navbar with 4 icons (Início, Serviços, Agendamentos, Perfil).",
    "Inventory UI constraint: admin-only access; prefer card-based layout (not tables) with quick-adjust action per product.",
    "Admin access UX: Profile page must show a highly visible 'ACESSAR ADM' button at the top that gates access to Admin pages (Controle de Estoque, Controle de Gastos) behind an admin password prompt.",
    "Admin access UX update: replace/rename the Profile top admin entry button to exactly 'PAINEL DO DONO' (must be physically visible on the Profile screen) and route it to 'Controle de Estoque'."
  ],
  "known_issues": [
    "Deployment/domain configuration errors: domain name must be 5–50 characters and contain only letters, numbers, and hyphens (previous attempted domains failed validation).",
    "Profile page: 'Área Administrativa' button is not appearing for the salon owner (admin entry point missing/hidden).",
    "Admin login: credentials (joana/joana123) are being rejected with 'senha errada' (login flow failing).",
    "Admin login: verifyLogin in hooks/useAdminPasswordGate.ts is not accepting the intended credentials when the password includes an internal space ('joana 123').",
    "After successful login with credentials (joana / \"joana 123\"), user still receives 'Access Denied' / 'Você não tem permissão de acesso à página' when attempting to access admin pages (role/route protection/admin gate not being granted).",
    "User reports the issue persists in the latest deployed build (v8): still getting 'Acesso negado' when attempting to access the admin area after logging in as joana.",
    "Admin login stopped working completely in v9; reset auth logic per strict credentials ('joana' / 'joana 123') and ensure AdminPasswordDialog handleSubmit calls verifyLogin and onSuccess() on success, and global auth state isAuthenticated/role updates accordingly.",
    "Credential spec mismatch/regression: project must use admin credentials joana/joana123 (no space) and ensure admin pages are accessible after successful login (no 'Acesso negado')."
  ],
  "isFixRequest": true,
  "existing_features": [
    {
      "id": "feature-create-the-core-app-navigation-and-information-architecture-with-4-primary-sections-1-agenda-de-hoje-for-daily-appointments-2-controle-de-estoque-for-professional-product-inventory-3-cat-logo-de-servi-os-for-services-and-prices-and-4-fidelidade-clientes-for-client-profiles-and-preferences-all-user-facing-ui-copy-must-be-in-portuguese",
      "title": "Create the core app navigation and information architecture with 4 primary sections: (1) \"Agenda de Hoje\" for daily appointments, (2) \"Controle de Estoque\" for professional product inventory, (3) \"Catálogo de Serviços\" for services and prices, and (4) \"Fidelidade Clientes\" for client profiles and preferences. All user-facing UI copy must be in Portuguese.",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-build-agenda-de-hoje-daily-agenda-ui-to-create-view-update-and-cancel-appointments-including-client-selection-creation-service-selection-from-the-service-catalog-scheduled-time-duration-notes-and-appointment-status-provide-a-today-view-optimized-for-day-operations-list-timeline-plus-basic-date-navigation",
      "title": "Build \"Agenda de Hoje\" (daily agenda) UI to create, view, update, and cancel appointments, including: client selection/creation, service selection from the service catalog, scheduled time, duration, notes, and appointment status. Provide a \"Today\" view optimized for day operations (list/timeline), plus basic date navigation.",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    },
    {
      "id": "feature-build-controle-de-estoque-ui-and-backend-logic-to-manage-professional-products-e-g-dyes-shampoos-including-product-name-brand-category-unit-current-quantity-minimum-threshold-low-stock-supplier-notes-and-stock-movement-history-add-remove-adjustments-with-reason-and-timestamp",
      "title": "Build \"Controle de Estoque\" UI and backend logic to manage professional products (e.g., dyes, shampoos) including: product name, brand, category, unit, current quantity, minimum threshold (low-stock), supplier notes, and stock movement history (add/remove adjustments with reason and timestamp).",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    },
    {
      "id": "feature-build-cat-logo-de-servi-os-ui-and-backend-logic-to-manage-services-with-name-description-duration-price-and-active-inactive-status-enable-selecting-services-when-creating-editing-appointments",
      "title": "Build \"Catálogo de Serviços\" UI and backend logic to manage services with: name, description, duration, price, and active/inactive status. Enable selecting services when creating/editing appointments.",
      "reqIds": [
        "REQ-5"
      ],
      "version": 1
    },
    {
      "id": "feature-build-fidelidade-clientes-ui-and-backend-logic-for-client-profiles-that-store-preferences-and-loyalty-related-details-including-contact-info-preferred-services-color-formula-notes-allergies-sensitivities-visit-history-linked-appointments-and-free-form-preference-notes",
      "title": "Build \"Fidelidade Clientes\" UI and backend logic for client profiles that store preferences and loyalty-related details, including: contact info, preferred services, color/formula notes, allergies/sensitivities, visit history (linked appointments), and free-form preference notes.",
      "reqIds": [
        "REQ-6"
      ],
      "version": 1
    },
    {
      "id": "feature-add-portfolio-result-photo-upload-and-viewing-allow-attaching-one-or-more-photos-to-a-client-and-or-an-appointment-store-them-in-the-backend-and-provide-a-gallery-ui-with-thumbnails-and-a-detail-view-including-optional-caption-service-tags-and-date",
      "title": "Add portfolio/result photo upload and viewing: allow attaching one or more photos to a client and/or an appointment, store them in the backend, and provide a gallery UI with thumbnails and a detail view (including optional caption, service tags, and date).",
      "reqIds": [
        "REQ-7"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-appointment-client-status-updates-as-in-app-updates-allow-staff-to-add-timestamped-status-entries-to-an-appointment-e-g-confirmado-em-andamento-finalizado-display-a-status-timeline-and-provide-a-one-click-copy-update-text-action-for-sharing-externally-without-integrating-sms-email-services",
      "title": "Implement appointment/client status updates as in-app updates: allow staff to add timestamped status entries to an appointment (e.g., \"Confirmado\", \"Em andamento\", \"Finalizado\"), display a status timeline, and provide a one-click 'copy update text' action for sharing externally (without integrating SMS/email services).",
      "reqIds": [
        "REQ-8"
      ],
      "version": 1
    },
    {
      "id": "feature-apply-a-cohesive-high-end-visual-theme-across-the-app-elegant-and-sophisticated-styling-using-gold-black-and-white-with-consistent-typography-spacing-and-polished-components-for-lists-forms-and-detail-pages-without-using-a-blue-purple-primary-palette",
      "title": "Apply a cohesive, high-end visual theme across the app: elegant and sophisticated styling using gold, black, and white, with consistent typography, spacing, and polished components for lists, forms, and detail pages (without using a blue/purple primary palette).",
      "reqIds": [
        "REQ-9"
      ],
      "version": 1
    },
    {
      "id": "feature-generate-and-include-static-brand-assets-for-the-app-logo-and-subtle-background-texture-and-render-them-in-the-ui-from-frontend-public-assets-generated-do-not-serve-these-images-via-the-backend",
      "title": "Generate and include static brand assets for the app (logo and subtle background/texture) and render them in the UI from frontend/public/assets/generated (do not serve these images via the backend).",
      "reqIds": [
        "REQ-10"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-app-navigation-to-be-mobile-first-with-a-fixed-bottom-tab-bar-that-has-exactly-4-tabs-home-services-appointments-profile-the-bottom-tab-bar-must-be-thumb-friendly-large-hit-targets-and-replace-the-current-desktop-style-sidebar-navigation-in-applayout",
      "title": "Update the app navigation to be mobile-first with a fixed bottom tab bar that has exactly 4 tabs: Home, Services, Appointments, Profile. The bottom tab bar must be thumb-friendly (large hit targets) and replace the current desktop-style sidebar navigation in AppLayout.",
      "reqIds": [
        "REQ-11"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-a-new-conversion-focused-home-screen-that-includes-1-a-hero-image-carousel-showing-best-highlight-photos-2-a-category-grid-with-4-elegant-category-items-highlights-haircut-treatments-agenda-and-3-a-floating-whatsapp-action-button-fixed-to-the-bottom-right-that-opens-the-provided-wa-me-deep-link-with-the-prefilled-message",
      "title": "Implement a new conversion-focused Home screen that includes: (1) a hero image carousel showing best highlight photos, (2) a category grid with 4 elegant category items: Highlights, Haircut, Treatments, Agenda, and (3) a floating WhatsApp action button fixed to the bottom-right that opens the provided wa.me deep link with the prefilled message.",
      "reqIds": [
        "REQ-12"
      ],
      "version": 1
    },
    {
      "id": "feature-align-the-global-visual-system-to-the-requested-luxury-dark-theme-near-black-graphite-backgrounds-metallic-gold-and-optional-rose-gold-accent-for-key-actions-and-icons-modern-clean-typography-montserrat-or-poppins-and-consistent-rounded-card-styling-radius-16-for-image-based-cards",
      "title": "Align the global visual system to the requested luxury dark theme: near-black/graphite backgrounds, metallic gold (and optional rose-gold accent) for key actions and icons, modern clean typography (Montserrat or Poppins), and consistent rounded card styling (radius 16) for image-based cards.",
      "reqIds": [
        "REQ-13"
      ],
      "version": 1
    },
    {
      "id": "feature-revise-the-service-catalog-page-ui-into-a-conversion-focused-vertical-list-where-each-service-item-shows-an-image-service-name-estimated-duration-price-and-an-schedule-button-per-item-tapping-schedule-must-start-the-existing-appointment-creation-flow-with-that-service-preselected",
      "title": "Revise the Service Catalog page UI into a conversion-focused vertical list where each service item shows: an image, service name, estimated duration, price, and an \"Schedule\" button per item. Tapping \"Schedule\" must start the existing appointment creation flow with that service preselected.",
      "reqIds": [
        "REQ-14"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-inventory-stock-control-ui-to-use-a-card-based-layout-instead-of-tables-each-product-card-must-show-a-product-image-current-quantity-and-a-quick-adjust-action-that-opens-the-existing-stock-adjustment-dialog-with-the-selected-product",
      "title": "Update the Inventory (stock control) UI to use a card-based layout (instead of tables). Each product card must show a product image, current quantity, and a \"Quick Adjust\" action that opens the existing stock adjustment dialog with the selected product.",
      "reqIds": [
        "REQ-15"
      ],
      "version": 1
    },
    {
      "id": "feature-add-an-admin-only-expenses-dashboard-that-displays-a-simple-monthly-bar-chart-comparing-income-vs-expenses-and-supports-adding-basic-transactions-so-the-chart-is-not-hard-coded-the-dashboard-must-be-accessible-from-the-profile-tab-or-a-clearly-labeled-admin-section-within-profile",
      "title": "Add an Admin-only Expenses dashboard that displays a simple monthly bar chart comparing \"Income vs. Expenses\" and supports adding basic transactions so the chart is not hard-coded. The dashboard must be accessible from the Profile tab (or a clearly labeled admin section within Profile).",
      "reqIds": [
        "REQ-16"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-dedicated-prominent-nails-designer-quick-filter-on-the-services-catalog-page-that-when-selected-filters-the-list-to-services-matching-nails-manicure-terms-and-clearly-indicates-the-filter-is-active-with-a-one-tap-way-to-clear-it",
      "title": "Add a dedicated, prominent 'Nails Designer' quick filter on the Services Catalog page that, when selected, filters the list to services matching nails/manicure terms and clearly indicates the filter is active (with a one-tap way to clear it).",
      "reqIds": [
        "REQ-18"
      ],
      "version": 1
    },
    {
      "id": "feature-allow-creating-a-nails-designer-service-faster-by-adding-an-optional-preset-entry-point-from-the-existing-add-service-flow-that-pre-fills-the-service-name-with-nails-designer-leaving-duration-price-to-be-entered-by-the-admin",
      "title": "Allow creating a 'Nails Designer' service faster by adding an optional preset entry point from the existing 'Add Service' flow that pre-fills the service name with 'Nails Designer' (leaving duration/price to be entered by the admin).",
      "reqIds": [
        "REQ-19"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-highly-visible-button-labeled-exactly-acessar-adm-at-the-top-of-the-profile-page-currently-implemented-by-frontend-src-pages-fidelidadeclientespage-tsx-this-button-must-be-visible-even-when-useadmin-returns-false-so-the-salon-owner-is-never-blocked-by-the-missing-hidden-rea-administrativa-section",
      "title": "Add a highly visible button labeled exactly \"ACESSAR ADM\" at the top of the Profile page (currently implemented by `frontend/src/pages/FidelidadeClientesPage.tsx`). This button must be visible even when `useAdmin()` returns false, so the salon owner is never blocked by the missing/hidden \"Área Administrativa\" section.",
      "reqIds": [
        "REQ-20"
      ],
      "version": 1
    },
    {
      "id": "feature-when-the-user-taps-acessar-adm-show-an-admin-password-prompt-and-only-proceed-after-successful-password-validation-after-validation-navigate-to-an-admin-landing-screen-that-provides-access-to-both-controle-de-estoque-and-controle-de-gastos-using-the-existing-navigation-mechanism-in-frontend-src-app-tsx-i-e-to-the-existing-inventory-and-expenses-pages",
      "title": "When the user taps \"ACESSAR ADM\", show an admin password prompt and only proceed after successful password validation. After validation, navigate to an Admin landing screen that provides access to both \"Controle de Estoque\" and \"Controle de Gastos\" (using the existing navigation mechanism in `frontend/src/App.tsx`, i.e., to the existing `inventory` and `expenses` pages).",
      "reqIds": [
        "REQ-21"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-consistent-admin-gate-to-both-admin-pages-inventory-and-expenses-so-that-they-require-a-the-existing-admin-privilege-check-iscalleradmin-and-b-the-new-successful-password-validation-session-to-render-their-content-if-the-gate-is-not-satisfied-show-an-access-denied-state-and-do-not-render-admin-functionality",
      "title": "Add a consistent admin gate to both admin pages (Inventory and Expenses) so that they require (a) the existing admin privilege check (`isCallerAdmin`) and (b) the new successful password validation session to render their content. If the gate is not satisfied, show an access-denied state and do not render admin functionality.",
      "reqIds": [
        "REQ-23"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-profile-page-frontend-src-pages-fidelidadeclientespage-tsx-to-physically-render-a-highly-visible-button-labeled-exactly-painel-do-dono-at-the-very-top-of-the-page-above-other-content-and-ensure-it-is-always-visible-regardless-of-useadmin-admin-status-loading",
      "title": "Update the Profile page (`frontend/src/pages/FidelidadeClientesPage.tsx`) to physically render a highly visible button labeled exactly \"PAINEL DO DONO\" at the very top of the page (above other content) and ensure it is always visible regardless of `useAdmin()` / admin status/loading.",
      "reqIds": [
        "REQ-24"
      ],
      "version": 1
    },
    {
      "id": "feature-create-a-dedicated-admin-area-login-screen-new-page-component-that-prompts-for-username-and-password-and-validates-the-credentials-exactly-as-username-joana-and-password-joana123-the-painel-do-dono-button-must-navigate-to-this-login-screen-when-the-admin-session-is-not-validated",
      "title": "Create a dedicated Admin Area login screen (new page component) that prompts for username and password and validates the credentials exactly as: Username \"joana\" and Password \"joana123\". The \"PAINEL DO DONO\" button must navigate to this login screen when the admin session is not validated.",
      "reqIds": [
        "REQ-25"
      ],
      "version": 1
    },
    {
      "id": "feature-after-a-successful-admin-login-the-painel-do-dono-button-must-navigate-directly-to-the-inventory-page-controle-de-estoque-inventory-if-the-session-is-already-validated-tapping-the-button-should-immediately-navigate-to-inventory-without-re-prompting-for-credentials",
      "title": "After a successful admin login, the \"PAINEL DO DONO\" button must navigate directly to the Inventory page (\"Controle de Estoque\" / `inventory`). If the session is already validated, tapping the button should immediately navigate to `inventory` without re-prompting for credentials.",
      "reqIds": [
        "REQ-26"
      ],
      "version": 1
    },
    {
      "id": "feature-enforce-that-both-admin-pages-inventory-frontend-src-pages-controledeestoquepage-tsx-and-expenses-frontend-src-pages-expensesdashboardpage-tsx-remain-inaccessible-unless-1-the-caller-is-an-admin-iscalleradmin-via-useadmin-and-2-the-admin-session-is-validated-via-the-login-flow-if-either-condition-is-not-met-show-the-existing-access-denied-auth-required-states-and-do-not-render-admin-functionality",
      "title": "Enforce that both admin pages—Inventory (`frontend/src/pages/ControleDeEstoquePage.tsx`) and Expenses (`frontend/src/pages/ExpensesDashboardPage.tsx`)—remain inaccessible unless (1) the caller is an admin (`isCallerAdmin` via `useAdmin`) AND (2) the admin session is validated via the login flow. If either condition is not met, show the existing access-denied/auth-required states and do not render admin functionality.",
      "reqIds": [
        "REQ-27"
      ],
      "version": 1
    },
    {
      "id": "feature-update-navigation-in-frontend-src-app-tsx-to-support-the-new-admin-login-screen-as-a-routable-pageview-and-wire-the-profile-painel-do-dono-button-flow-accordingly-profile-admin-login-when-not-validated-profile-inventory-when-validated",
      "title": "Update navigation in `frontend/src/App.tsx` to support the new Admin Login screen as a routable `PageView`, and wire the Profile \"PAINEL DO DONO\" button flow accordingly (Profile -> Admin Login when not validated; Profile -> Inventory when validated).",
      "reqIds": [
        "REQ-28"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-admin-credential-verification-accepts-the-intended-credentials-even-when-the-user-accidentally-enters-leading-trailing-whitespace-by-normalizing-trim-username-and-password-before-calling-actor-verifyadminlogin-in-the-admin-login-flow-frontend-src-pages-adminloginpage-tsx-and-in-the-admin-password-dialog-flow-frontend-src-components-admin-adminpassworddialog-tsx",
      "title": "Ensure admin credential verification accepts the intended credentials even when the user accidentally enters leading/trailing whitespace by normalizing (trim) username and password before calling `actor.verifyAdminLogin` in the admin login flow (`frontend/src/pages/AdminLoginPage.tsx`) and in the admin password dialog flow (`frontend/src/components/admin/AdminPasswordDialog.tsx`).",
      "reqIds": [
        "REQ-31"
      ],
      "version": 1
    },
    {
      "id": "feature-centralize-credential-normalization-in-frontend-src-hooks-useadminpasswordgate-ts-so-any-caller-of-verifylogin-username-password-automatically-trims-the-inputs-before-sending-them-to-actor-verifyadminlogin-preventing-future-regressions-and-ensuring-consistent-behavior-across-all-login-entry-points",
      "title": "Centralize credential normalization in `frontend/src/hooks/useAdminPasswordGate.ts` so any caller of `verifyLogin(username, password)` automatically trims the inputs before sending them to `actor.verifyAdminLogin`, preventing future regressions and ensuring consistent behavior across all login entry points.",
      "reqIds": [
        "REQ-32"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-admin-credential-validation-so-that-username-joana-and-password-joana-123-with-a-single-internal-space-are-treated-as-valid-credentials-end-to-end-frontend-verifylogin-backend-verifyadminlogin",
      "title": "Update the admin credential validation so that username \"joana\" and password \"joana 123\" (with a single internal space) are treated as valid credentials end-to-end (frontend verifyLogin -> backend verifyAdminLogin).",
      "reqIds": [
        "REQ-33"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-credential-normalization-in-frontend-src-hooks-useadminpasswordgate-ts-does-not-remove-or-collapse-internal-whitespace-in-the-password-it-may-only-trim-leading-trailing-whitespace-before-calling-actor-verifyadminlogin",
      "title": "Ensure the credential normalization in `frontend/src/hooks/useAdminPasswordGate.ts` does not remove or collapse internal whitespace in the password; it may only trim leading/trailing whitespace before calling `actor.verifyAdminLogin`.",
      "reqIds": [
        "REQ-34"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-admin-credentials-are-treated-as-exactly-username-joana-and-password-joana-123-single-internal-space-end-to-end-and-that-normalization-trims-only-leading-trailing-whitespace-without-altering-internal-whitespace",
      "title": "Ensure the admin credentials are treated as exactly username \"joana\" and password \"joana 123\" (single internal space) end-to-end, and that normalization trims only leading/trailing whitespace without altering internal whitespace.",
      "reqIds": [
        "REQ-36"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-frontend-admin-login-flow-s-adminloginpage-and-adminpassworddialog-via-useadminpasswordgate-so-that-a-successful-credential-verification-also-triggers-backend-admin-role-granting-for-the-current-caller-and-refreshes-any-cached-admin-permission-checks-used-by-adminaccessgate",
      "title": "Update the frontend admin login flow(s) (AdminLoginPage and AdminPasswordDialog via useAdminPasswordGate) so that a successful credential verification also triggers backend admin-role granting for the current caller and refreshes any cached admin/permission checks used by AdminAccessGate.",
      "reqIds": [
        "REQ-38"
      ],
      "version": 1
    },
    {
      "id": "feature-align-admin-gating-so-that-the-admin-pages-inventory-expenses-admin-landing-are-accessible-when-and-only-when-the-caller-has-admin-permission-and-the-admin-password-session-is-validated-ensure-the-ui-does-not-incorrectly-block-the-specific-joana-admin-after-successful-login",
      "title": "Align admin gating so that the admin pages (Inventory, Expenses, Admin Landing) are accessible when (and only when) the caller has admin permission AND the admin-password session is validated; ensure the UI does not incorrectly block the specific \"joana\" admin after successful login.",
      "reqIds": [
        "REQ-39"
      ],
      "version": 1
    },
    {
      "id": "feature-harden-the-frontend-admin-login-flow-frontend-src-pages-adminloginpage-tsx-via-useadminpasswordgate-so-that-it-does-not-navigate-to-admin-pages-until-both-conditions-are-true-1-the-password-session-is-validated-and-2-the-backend-admin-permission-check-isadmin-from-useadmin-is-confirmed-true-after-login-if-credential-verification-returns-true-but-admin-permission-is-still-false-after-refetch-show-a-clear-error-state-and-do-not-proceed-to-inventory-expenses-admin-pages",
      "title": "Harden the frontend admin login flow (`frontend/src/pages/AdminLoginPage.tsx` via `useAdminPasswordGate`) so that it does not navigate to admin pages until both conditions are true: (1) the password session is validated, and (2) the backend admin permission check (`isAdmin` from `useAdmin`) is confirmed true after login. If credential verification returns true but admin permission is still false after refetch, show a clear error state and do not proceed to Inventory/Expenses/Admin pages.",
      "reqIds": [
        "REQ-42"
      ],
      "version": 1
    },
    {
      "id": "feature-improve-the-admin-gate-ux-frontend-src-components-admin-adminaccessgate-tsx-to-reduce-confusion-when-access-is-blocked-by-distinguishing-between-a-missing-backend-admin-permission-and-b-missing-password-session-validation-and-provide-actionable-navigation-buttons-to-the-correct-entry-points-e-g-to-the-admin-login-page-using-the-existing-app-tsx-page-navigation-pattern",
      "title": "Improve the admin gate UX (`frontend/src/components/admin/AdminAccessGate.tsx`) to reduce confusion when access is blocked by distinguishing between (a) missing backend admin permission and (b) missing password-session validation, and provide actionable navigation buttons to the correct entry points (e.g., to the Admin Login page) using the existing `App.tsx` page navigation pattern.",
      "reqIds": [
        "REQ-43"
      ],
      "version": 1
    },
    {
      "id": "feature-update-frontend-src-hooks-useadminpasswordgate-ts-so-verifylogin-username-password-accepts-only-the-exact-credentials-username-joana-and-password-joana-123-single-internal-space-and-returns-true-only-for-that-exact-pair-remove-any-trim-normalization-logic-from-the-verification-path-so-the-internal-space-in-the-password-is-never-altered",
      "title": "Update `frontend/src/hooks/useAdminPasswordGate.ts` so `verifyLogin(username, password)` accepts **only** the exact credentials username `\"joana\"` and password `\"joana 123\"` (single internal space) and returns `true` only for that exact pair. Remove any `trim()`/normalization logic from the verification path so the internal space in the password is never altered.",
      "reqIds": [
        "REQ-44"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-the-requested-global-authentication-state-update-on-successful-login-when-credentials-are-valid-force-global-auth-state-to-isauthenticated-true-and-set-role-admin-persist-this-state-in-a-stable-frontend-location-e-g-sessionstorage-and-expose-it-from-useadminpasswordgate-or-an-equivalent-shared-hook-state-so-other-components-can-read-it-ensure-logout-clear-actions-reset-isauthenticated-and-role",
      "title": "Implement the requested global authentication state update on successful login: when credentials are valid, force global auth state to `isAuthenticated = true` and set `role = 'admin'`. Persist this state in a stable frontend location (e.g., `sessionStorage`) and expose it from `useAdminPasswordGate` (or an equivalent shared hook/state) so other components can read it. Ensure logout/clear actions reset `isAuthenticated` and `role`.",
      "reqIds": [
        "REQ-45"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-frontend-src-components-admin-adminpassworddialog-tsx-submission-flow-so-handlesubmit-calls-verifylogin-username-password-correctly-and-when-isvalid-is-true-it-reliably-calls-onsuccess-after-closing-the-dialog-also-remove-any-trim-based-required-field-checks-in-this-dialog-that-could-interfere-with-the-exact-password-handling-and-ensure-variable-names-used-in-the-component-match-the-hook-function-signature-username-password",
      "title": "Fix `frontend/src/components/admin/AdminPasswordDialog.tsx` submission flow so `handleSubmit` calls `verifyLogin(username, password)` correctly and, when `isValid` is `true`, it reliably calls `onSuccess()` after closing the dialog. Also remove any `trim()`-based required-field checks in this dialog that could interfere with the exact password handling, and ensure variable names used in the component match the hook function signature (username/password).",
      "reqIds": [
        "REQ-46"
      ],
      "version": 1
    },
    {
      "id": "feature-update-admin-credential-validation-to-accept-only-username-joana-and-password-joana123-no-internal-space-end-to-end-aligning-frontend-verification-useadminpasswordgate-with-backend-verification-verifyadminlogin",
      "title": "Update admin credential validation to accept ONLY username \"joana\" and password \"joana123\" (no internal space) end-to-end, aligning frontend verification (useAdminPasswordGate) with backend verification (verifyAdminLogin).",
      "reqIds": [
        "REQ-47"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-a-successful-admin-login-reliably-grants-backend-admin-permissions-for-the-current-caller-and-refreshes-any-cached-admin-checks-so-adminaccessgate-immediately-allows-entry-to-admin-pages-after-login",
      "title": "Ensure a successful admin login reliably grants backend admin permissions for the current caller and refreshes any cached admin checks so AdminAccessGate immediately allows entry to admin pages after login.",
      "reqIds": [
        "REQ-48"
      ],
      "version": 1
    },
    {
      "id": "feature-remove-any-frontend-logic-that-hardcodes-or-assumes-the-old-spaced-password-joana-123-including-strict-checks-and-any-copy-error-flows-that-depend-on-the-old-credential-spec-while-keeping-the-existing-admin-session-persistence-behavior-sessionstorage-state-isauthenticated-role",
      "title": "Remove any frontend logic that hardcodes or assumes the old spaced password (\"joana 123\"), including strict checks and any copy/error flows that depend on the old credential spec, while keeping the existing admin session persistence behavior (sessionStorage state: isAuthenticated/role).",
      "reqIds": [
        "REQ-49"
      ],
      "version": 1
    },
    {
      "id": "feature-validate-the-end-to-end-navigation-flow-for-owner-admin-access-profile-painel-do-dono-admin-login-when-not-validated-inventory-after-successful-login-and-ensure-adminaccessgate-provides-a-clear-path-to-admin-login-when-blocked",
      "title": "Validate the end-to-end navigation flow for owner/admin access: Profile \"PAINEL DO DONO\" -> Admin Login (when not validated) -> Inventory (after successful login), and ensure AdminAccessGate provides a clear path to Admin Login when blocked.",
      "reqIds": [
        "REQ-50"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Implement 'Agenda de Hoje' to manage daily appointments (agendamentos)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-2",
      "summary": "Implement 'Controle de Estoque' for professional product inventory (e.g., dyes, shampoos)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-3",
      "summary": "Implement 'Catálogo de Serviços' with service listing and prices",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-4",
      "summary": "Implement 'Fidelidade Clientes' to register client preferences and loyalty-related data",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-5",
      "summary": "Add portfolio/result photo uploads associated with services/clients",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-6",
      "summary": "Enable sending client status updates (e.g., appointment/service progress notifications)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-8",
      "summary": "Implement backend data models and CRUD APIs in the single Motoko main actor for: appointments, inventory products, services, clients (including preferences/loyalty fields), portfolio photos, and status updates. Provide query endpoints needed to support filtering, sorting, and 'today view' on the frontend.",
      "reqIds": [
        "REQ-2"
      ],
      "status": "pending"
    },
    {
      "id": "AR-7",
      "summary": "Create a conversion-focused mobile-first Home screen with highlight photo carousel and category grid (Mechas, Corte, Tratamentos, Agenda)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-9",
      "summary": "Add a floating WhatsApp action button (deep link to wa.me with prefilled message) fixed bottom-right",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-10",
      "summary": "Implement 'Controle de Gastos' dashboard with simple monthly 'Entradas vs. Saídas' bar charts",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-17",
      "summary": "Implement backend support for Admin-only access control and expenses tracking. Add: (1) an admin allowlist mechanism, (2) a query to check whether the current caller is an admin, (3) CRUD methods for expense/income transactions, and (4) a query that returns monthly aggregates for Income vs. Expenses used by the frontend chart.",
      "reqIds": [
        "REQ-17"
      ],
      "status": "pending"
    },
    {
      "id": "AR-18",
      "summary": "Adicionar suporte a “Nails Designer” (unha/serviços de manicure) no app",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-23",
      "summary": "Implement backend support for validating an admin password so the frontend can confirm the password without hardcoding the password in the UI bundle. Add a canister method to verify an admin password attempt, and persist the admin password (or a derived representation) in stable state so it survives upgrades.",
      "reqIds": [
        "REQ-22"
      ],
      "status": "pending"
    },
    {
      "id": "AR-24",
      "summary": "Add a visible top-of-Profile owner button labeled 'PAINEL DO DONO' that navigates to 'Controle de Estoque'",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-25",
      "summary": "Create an Admin Area login screen (Usuário: joana / Senha: joana123) and only after successful login allow access to 'Controle de Estoque' and 'Controle de Gastos'",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-31",
      "summary": "Implement backend support for verifying the admin login credentials (username + password) without trapping for non-admin callers, so the login screen can validate credentials without requiring the caller to already have admin privileges. Credentials must be exactly: username \"joana\" and password \"joana123\".",
      "reqIds": [
        "REQ-29"
      ],
      "status": "pending"
    },
    {
      "id": "AR-32",
      "summary": "Persist the admin login secret(s) across upgrades in the single Motoko actor (`backend/main.mo`) so that admin login security does not reset on redeploy/upgrade. If a migration is required to preserve or initialize state, add `backend/migration.mo` per the project migration policy.",
      "reqIds": [
        "REQ-30"
      ],
      "status": "pending"
    },
    {
      "id": "AR-40",
      "summary": "Ensure admin authorization state is persisted correctly across canister upgrades so that (a) the configured admin credentials and (b) any granted admin permissions are not lost after redeploy/upgrade. Update `backend/migration.mo` only if required by the project migration policy to preserve/initialize any new stable state introduced to support admin persistence.",
      "reqIds": [
        "REQ-41"
      ],
      "status": "pending"
    },
    {
      "id": "AR-45",
      "summary": "Padronizar e corrigir o login admin para aceitar apenas as credenciais exatas Usuário \"joana\" e Senha \"joana123\" (sem espaço) end-to-end (frontend + backend) e liberar acesso ao Painel/Admin (Inventory/Expenses) após login bem-sucedido",
      "reqIds": [],
      "status": "pending"
    }
  ],
  "gameProjectType": "none",
  "projectName": "High-end Beauty Salon Management App (Portuguese UI) with Agenda, Inventory, Services, Loyalty, Portfolio, and Status Updates",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}